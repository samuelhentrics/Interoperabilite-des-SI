stages:
  - build
  - test

build:
  image: node:20
  stage: build
  script:
    - echo "Building webhook-service..."
    - cd webhook
    - npm ci || npm install
    - npm run build --if-present
    - cd ..

    - echo "Building back-devmaterial..."
    - cd back-devmaterial
    - npm ci || npm install
    - npm run build --if-present
    - cd ..

    - echo "Building front-devmaterial..."
    - cd front-devmaterial
    - npm ci || npm install
    - npm run build --if-present

include:
  - template: Security/SAST.gitlab-ci.yml
